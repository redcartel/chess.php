(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[,,,,,,,,,function(e,t,n){e.exports=n(21)},,,,,,function(e,t,n){},function(e,t,n){e.exports=n.p+"static/media/logo.5d5d9eef.svg"},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var a=n(0),s=n.n(a),r=n(8),o=n.n(r),i=(n(15),n(16),n(17),n(6)),c=n(1),u=n(2),l=n(4),m=n(3),p=n(5);n(18);var d={p:"\u265f",r:"\u265c",k:"\u265e",b:"\u265d",Q:"\u265b",K:"\u265a"};var h=function(e){return s.a.createElement("span",{className:"Piece ".concat((t=e.string,2!==t.length?"none":"w"===t[0]?"white":"black"))},function(e){return d[e[1]]}(e.string));var t},f=(n(19),function(e){function t(){return Object(c.a)(this,t),Object(l.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(u.a)(t,[{key:"rows",value:function(e){var t=this;return this.props.parent.sideSquares().map(function(e,n){return s.a.createElement("tr",{key:n}," ",t.rowTDs(e,n))})}},{key:"pHighlight",value:function(e,t){var n=this.props.parent.state.move;if(null===n[0])return!1;var a=this.props.parent.sideCoords(n[0],n[1]);if(e===a[0]&&t===a[1])return!0;if(null===n[2])return!1;var s=this.props.parent.sideCoords(n[2],n[3]);return e===s[0]&&t===s[1]}},{key:"rowTDs",value:function(e,t){var n=this;return e.map(function(e,a){n.props.parent.state.move;var r=((a+t)%2?"black":"white")+" "+(n.pHighlight(t,a)?"highlight":"");return s.a.createElement("td",{className:r,key:a,onClick:function(){n.props.parent.moveClick(t,a)}},s.a.createElement(h,{string:e}))})}},{key:"render",value:function(){return console.log("Board",this.props.parent.state),s.a.createElement("div",{className:"Board"},s.a.createElement("div",{className:"spacer"}),s.a.createElement("table",{className:"BoardDisplay"},this.rows(this.props.parent.state.squares)),s.a.createElement("div",{className:"spacer"}),s.a.createElement("div",{class:"Restart"},s.a.createElement("button",{onClick:this.props.parent.restartClick},"Restart Game")),s.a.createElement("div",{className:"spacer"}))}}]),t}(a.Component)),v=(n(20),function(e){function t(){return Object(c.a)(this,t),Object(l.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e,t={w:"White",B:"Black"}[this.props.parent.state.turn%2===0?"w":"B"],n="It is ".concat(t,"'s turn."),a=this.props.parent.state.side;e="w"===a?"You are playing White.":"B"===a?"You are playing Black.":"You have not joined the game.";var r=s.a.createElement("div",{className:"JoinButon"},s.a.createElement("button",{onClick:this.props.parent.joinClick},null===a?"Join game":"Switch Sides"));return s.a.createElement("div",{className:"Info ".concat(t)},s.a.createElement("p",{className:"TurnInfo"},"Turn #",this.props.parent.state.turn,". ",n),s.a.createElement("p",{className:"PlayerSideInfo"},e),r)}}]),t}(a.Component)),g="http://157.230.214.253",w=function(e){function t(){return Object(c.a)(this,t),Object(l.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return s.a.createElement("header",{className:"Header"},s.a.createElement("h1",null,"PHP / React Chess"),s.a.createElement("p",null,"by Carter Adams"))}}]),t}(a.Component),b=function(e){function t(){return Object(c.a)(this,t),Object(l.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return s.a.createElement("footer",{className:"Footer"},s.a.createElement("p",null,"Made for the public domain by Carter Adams, 2019"))}}]),t}(a.Component),j=function(e){function t(){var e,n;Object(c.a)(this,t);for(var a=arguments.length,s=new Array(a),r=0;r<a;r++)s[r]=arguments[r];return(n=Object(l.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(s)))).state={squares:[],turn:0,victory:"",move:[null,null,null,null],side:""},n.sideSquares=function(){if("w"===n.state.side)return n.state.squares;var e=[];return n.state.squares.map(function(t){e.splice(0,0,function(){var e=[];return t.map(function(t){e.splice(0,0,t)}),e}())}),e},n.sideCoords=function(e,t){return"B"===n.state.side?[7-e,7-t]:[e,t]},n.timer=null,n.joinClick=function(){"w"!==n.state.side&&"B"!==n.state.side?n.setState({side:n.state.turn%2===0?"w":"B"},function(){window.sessionStorage.setItem("side",n.state.side),console.log("new side ".concat(n.state.side," for turn ").concat(n.state.turn))}):n.setState({side:"w"===n.state.side?"B":"w"},function(){window.sessionStorage.setItem("side",n.state.side),console.log("swap sides")})},n.getColor=function(e,t){var a=n.state.squares[e][t];return 2===a.length&&a.substring(0,1)},n.getPiece=function(e,t){var a=n.state.squares[e][t];return 2===a.length&&a.substring(1,2)},n.moveClick=function(e,t){var a="w"===n.state.side?e:7-e,s="w"===n.state.side?t:7-t;return null===n.state.move[0]?n.firstClick(a,s):null===n.state.move[2]?n.secondClick(a,s):void 0},n.firstClick=function(e,t){n.getColor(e,t)===n.state.side&&n.setState({move:[e,t,null,null]})},n.secondClick=function(e,t){n.setState({move:[n.state.move[0],n.state.move[1],e,t]},function(){n.move(n.state.move[0],n.state.move[1],n.state.move[2],n.state.move[3])})},n.move=function(e,t,a,s){var r="?rf=".concat(e,"&cf=").concat(t,"&rt=").concat(a,"&ct=").concat(s,"&turn=").concat(n.state.turn),o="".concat(g,"/chess.php").concat(r);fetch(o,{method:"put",mode:"cors"}).then(function(e){return e.json()}).then(function(e){n.setState(Object(i.a)({},e),function(){n.timer=setTimeout(function(){n.setState({move:[null,null,null,null]})},250)})})},n.restartClick=function(e){e.preventDefault(),n.move("x","x","x","x")},n.pingServer=function(){fetch("".concat(g,"/chess.php")).then(function(e){return e.json()}).then(function(e){e.turn===n.state.turn?n.timer=setTimeout(n.pingServer,250):n.setState(Object(i.a)({},e,{move:[null,null,null,null]}),n.pingServer)})},n}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=null===window.sessionStorage.getItem("side")?"":window.sessionStorage.getItem("side");console.log("loadstate: ".concat(t,", turn: ").concat(this.state.turn)),0===this.state.squares.length?fetch("".concat(g,"/chess.php")).then(function(e){return e.json()}).then(function(n){e.setState(Object(i.a)({},n,{side:t}),function(){""===e.state.side&&e.setState({side:e.state.turn%2===0?"w":"B"},function(){console.log("side set from turn"),window.sessionStorage.setItem("side",e.state.side)})})}):(console("cDM, squares exist"),"w"!==t&&"B"!==t?this.setState({side:this.state.turn%2===0?"w":"B"},function(){console.log("side set from turn"),window.sessionStorage.setItem("side",e.state.side)}):(console.log("side set from loadState"),this.setState({side:t})))}},{key:"render",value:function(){return null===this.timer&&this.pingServer(),s.a.createElement("main",{className:"Main ".concat(this.state.side)},s.a.createElement(v,{parent:this}),s.a.createElement(f,{parent:this}))}}]),t}(a.Component);var k=function(){return s.a.createElement("div",{className:"App"},s.a.createElement(w,null),s.a.createElement(j,null),s.a.createElement(b,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(s.a.createElement(k,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}],[[9,1,2]]]);
//# sourceMappingURL=main.72e5f67d.chunk.js.map